<%- include('../layout/header', { title: 'Part Detail' })%>

    <div class="col-md-4 offset-md-4">
        <div class="alert alert-primary" role="alert">
            Part # <%= part.code %>
        </div>
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Code</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control" id="txtCode" maxlength="3" value="<%= part.code %>" />
            </div>
        </div>
        <div class="form-group row">
            <label for="inputPassword3" class="col-sm-2 col-form-label">Descirption</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="txtDescription" maxlength="50" value="<%= part.description %>" />
            </div>
        </div>
        <div class="form-group row">
            <label for="inputPassword3" class="col-sm-2 col-form-label">Price</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="txtPrice" value="<%= part.price %>" />
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-4">
                <button type="button" class="btn btn-primary btn-block" onclick="saveParts()">Submit</button>
            </div>
            <div class="col-sm-4">
                <button type="button" class="btn btn-primary btn-block" onclick="deleteParts()">Delete</button>
            </div>
            <div class="col-sm-4">
                <button type="button" class="btn btn-primary btn-block" onclick="history.back()">Cancel</button>
            </div>
        </div>
    </div>
    <script>
        function saveParts() {
            var data = {
                code: $("#txtCode").val(),
                description: $("#txtDescription").val(),
                price: $("#txtPrice").val()
            }

            $.ajax({
                type: 'POST',
                url: '/api/part/update',
                data: data,
                success: function (data) {
                    window.location.href='/partlist'
                }
            });
        }

        function deleteParts() {
            var data = {
                code: $("#txtCode").val()
            }

            $.ajax({
                contentType: 'application/json',
                type: 'POST',
                url: '/api/part/delete',
                data: JSON.stringify(data),
                success: function (res) {
                    if (res.errno==0){
                        window.location.href='/partlist'
                    }
                }
            });
        }
    </script>
    <%- include('../layout/footer')%>